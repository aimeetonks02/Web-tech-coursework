<!DOCTYPE html>
<html>
    <head>
        <title>Web Tech Coursework</title>
        <link rel ="stylesheet" type="text/css" href="style.css">
        <script src="dailyweatherdata.js"></script>
        <script src="weatherforecast.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"
            integrity="sha512-Wt1bJGtlnMtGP0dqNFH1xlkLBNpEodaiQ8ZN5JLA5wpc1sUlk/O5uuOMNgvzddzkpvZ9GLyYNa8w2s7rqiTk5Q=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </head>

    <body>
        <div class="navbar">
            <a href="homepage.html">Home</a>
            <div class="dropdown">
                <button class="dropbtn">CV</button>
                <div class="dropdown-content">
                    <a href="cv.html#modules">Modules</a>
                    <a href="cv.html#summer">Summer Programming Work</a>
                    <a href="cv.html#third">Third Year Project</a>
                </div>
            </div>
            <a href="#">Weather Data</a>
            <a href="processing.html">Publication</a>
            <a style="float:right" href="login.html">Login</a>
        </div>

        <div id="title">
            <h1>Weather Data Rendering</h1>
        </div>

        <h1>Longitude: <label id="lon"></label></h1>
        <canvas id="myChart"></canvas>

        <script>
            //TODO: Task 1:
            var daily = JSON.parse(dailydata_stoke);
            document.getElementById('lon').innerHTML = daily.coord.lon;
          
            //TODO: Task 2, 3 and 4
            var forecast = JSON.parse(forecast_stoke);
            this.dateList = forecast.list.map(list => {
              return list.dt_txt;
            });
          
            this.temperatureList = forecast.list.map(list => {
              return list.main.temp;
            });
          
            var ctx = document.getElementById('myChart').getContext('2d');
            this.chart = new Chart(ctx, {
              type: "line",
              data: {
                labels: this.dateList,
                datasets: [
                  {
                    label: "Temperature",
                    backgroundColor: "lightblue",
                    borderColor: "blue",
                    fill: false,
                    data: this.temperatureList
                  }
                ]
              }
            })
          </script>
    </body>
</html>